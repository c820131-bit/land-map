<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>Investment Map Pro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif; background: #0f1419; overflow: hidden; }
        #map { width: 100vw; height: 100vh; }
        .glass-panel { background: rgba(15, 20, 25, 0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(212, 168, 83, 0.15); border-radius: 16px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05); }
        .layer-panel { position: absolute; top: 20px; left: 20px; padding: 20px; min-width: 220px; max-height: calc(100vh - 200px); overflow-y: auto; z-index: 100; }
        .layer-panel::-webkit-scrollbar { width: 4px; }
        .layer-panel::-webkit-scrollbar-track { background: transparent; }
        .layer-panel::-webkit-scrollbar-thumb { background: rgba(212, 168, 83, 0.3); border-radius: 4px; }
        .panel-title { font-size: 14px; font-weight: 700; color: #d4a853; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; padding-bottom: 12px; border-bottom: 1px solid rgba(212, 168, 83, 0.2); }
        .panel-title::before { content: "‚óÜ"; font-size: 12px; }
        .layer-group { margin-bottom: 16px; }
        .layer-group-title { font-size: 10px; font-weight: 600; color: rgba(255, 255, 255, 0.4); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .layer-item { display: flex; align-items: center; padding: 10px 12px; margin-bottom: 6px; background: rgba(255, 255, 255, 0.03); border: 1px solid transparent; border-radius: 10px; cursor: pointer; transition: all 0.2s ease; }
        .layer-item:hover { background: rgba(212, 168, 83, 0.1); border-color: rgba(212, 168, 83, 0.2); }
        .layer-item input[type="checkbox"] { display: none; }
        .toggle-switch { width: 36px; height: 18px; background: rgba(255, 255, 255, 0.1); border-radius: 9px; position: relative; margin-right: 10px; transition: all 0.2s ease; }
        .toggle-switch::after { content: ""; position: absolute; width: 14px; height: 14px; background: rgba(255, 255, 255, 0.6); border-radius: 50%; top: 2px; left: 2px; transition: all 0.2s ease; }
        .layer-item input:checked + .toggle-switch { background: linear-gradient(135deg, #d4a853, #c49b4a); }
        .layer-item input:checked + .toggle-switch::after { left: 20px; background: #fff; }
        .layer-color { width: 10px; height: 10px; border-radius: 50%; margin-right: 8px; box-shadow: 0 0 8px currentColor; }
        .layer-name { flex: 1; font-size: 12px; color: rgba(255, 255, 255, 0.85); font-weight: 500; }
        .layer-count { font-size: 10px; color: rgba(212, 168, 83, 0.8); background: rgba(212, 168, 83, 0.1); padding: 2px 8px; border-radius: 10px; font-weight: 600; }
        .stats-panel { position: absolute; bottom: 20px; left: 20px; padding: 16px 20px; min-width: 220px; z-index: 100; }
        .stats-title { font-size: 12px; font-weight: 600; color: #d4a853; margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .stat-item { background: rgba(255, 255, 255, 0.03); border-radius: 8px; padding: 10px; text-align: center; }
        .stat-value { font-size: 18px; font-weight: 700; color: #d4a853; margin-bottom: 2px; }
        .stat-label { font-size: 10px; color: rgba(255, 255, 255, 0.5); }
        .maptype-panel { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); padding: 8px; display: flex; gap: 4px; z-index: 100; }
        .maptype-btn { padding: 10px 20px; background: rgba(255, 255, 255, 0.05); border: 1px solid transparent; border-radius: 8px; color: rgba(255, 255, 255, 0.7); font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s ease; font-family: 'Pretendard', sans-serif; }
        .maptype-btn:hover { background: rgba(212, 168, 83, 0.1); color: #d4a853; }
        .maptype-btn.active { background: linear-gradient(135deg, #d4a853, #c49b4a); color: #0f1419; border-color: #d4a853; }
        .zoom-panel { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); padding: 8px; display: flex; flex-direction: column; gap: 4px; z-index: 100; }
        .zoom-btn { width: 40px; height: 40px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(212, 168, 83, 0.2); border-radius: 10px; color: #d4a853; font-size: 20px; font-weight: 300; cursor: pointer; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; }
        .zoom-btn:hover { background: rgba(212, 168, 83, 0.2); transform: scale(1.05); }
        .zoom-btn:active { transform: scale(0.95); }
        .custom-infowindow { background: rgba(15, 20, 25, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(212, 168, 83, 0.3); border-radius: 12px; padding: 16px; min-width: 200px; max-width: 300px; color: #fff; }
        .info-title { font-size: 14px; font-weight: 700; color: #d4a853; margin-bottom: 8px; line-height: 1.4; }
        .info-address { font-size: 12px; color: rgba(255, 255, 255, 0.7); margin-bottom: 8px; }
        .info-category { display: inline-block; font-size: 10px; background: rgba(212, 168, 83, 0.2); color: #d4a853; padding: 4px 10px; border-radius: 12px; font-weight: 600; }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="layer-panel glass-panel">
        <div class="panel-title">Î†àÏù¥Ïñ¥ Ïª®Ìä∏Î°§</div>
        <div class="layer-group">
            <div class="layer-group-title">ÏÇ¨ÏóÖ ÏòàÏ†ïÏßÄ</div>
            <label class="layer-item"><input type="checkbox" id="layer-rail" checked onchange="toggleLayer('rail')"><span class="toggle-switch"></span><span class="layer-color" style="color: #ef4444;"></span><span class="layer-name">Ï≤†ÎèÑÏòàÏ†ïÏßÄ</span><span class="layer-count" id="count-rail">2</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-highway" checked onchange="toggleLayer('highway')"><span class="toggle-switch"></span><span class="layer-color" style="color: #f59e0b;"></span><span class="layer-name">Í≥†ÏÜçÎèÑÎ°úIC</span><span class="layer-count" id="count-highway">2</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-dev" checked onchange="toggleLayer('dev')"><span class="toggle-switch"></span><span class="layer-color" style="color: #8b5cf6;"></span><span class="layer-name">Í∞úÎ∞úÏòàÏ†ïÏßÄ</span><span class="layer-count" id="count-dev">2</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-boundary" onchange="toggleLayer('boundary')"><span class="toggle-switch"></span><span class="layer-color" style="color: #06b6d4;"></span><span class="layer-name">ÏÇ¨ÏóÖÏßÄÍµ¨Í≤ΩÍ≥Ñ</span><span class="layer-count" id="count-boundary">-</span></label>
        </div>
        <div class="layer-group">
            <div class="layer-group-title">Í≤ΩÍ≥µÎß§ Î¨ºÍ±¥</div>
            <label class="layer-item"><input type="checkbox" id="layer-inside" checked onchange="toggleLayer('inside')"><span class="toggle-switch"></span><span class="layer-color" style="color: #22c55e;"></span><span class="layer-name">ÏßÄÍµ¨ÎÇ¥Í≤ΩÍ≥µÎß§</span><span class="layer-count" id="count-inside">1</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-polygon" onchange="toggleLayer('polygon')"><span class="toggle-switch"></span><span class="layer-color" style="color: #14b8a6;"></span><span class="layer-name">ÏßÄÍµ¨ÎÇ¥Ìè¥Î¶¨Í≥§</span><span class="layer-count" id="count-polygon">-</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-nearby" checked onchange="toggleLayer('nearby')"><span class="toggle-switch"></span><span class="layer-color" style="color: #3b82f6;"></span><span class="layer-name">ÏßÄÍµ¨Ïù∏Í∑ºÍ≤ΩÍ≥µÎß§</span><span class="layer-count" id="count-nearby">1</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-auction" onchange="toggleLayer('auction')"><span class="toggle-switch"></span><span class="layer-color" style="color: #ec4899;"></span><span class="layer-name">ÏùºÎ∞òÍ≤ΩÎß§</span><span class="layer-count" id="count-auction">0</span></label>
            <label class="layer-item"><input type="checkbox" id="layer-public" onchange="toggleLayer('public')"><span class="toggle-switch"></span><span class="layer-color" style="color: #a855f7;"></span><span class="layer-name">ÏùºÎ∞òÍ≥µÎß§</span><span class="layer-count" id="count-public">0</span></label>
        </div>
    </div>
    <div class="stats-panel glass-panel">
        <div class="stats-title">üìä ÌÜµÍ≥Ñ ÌòÑÌô©</div>
        <div class="stats-grid">
            <div class="stat-item"><div class="stat-value" id="stat-total">8</div><div class="stat-label">Ï†ÑÏ≤¥</div></div>
            <div class="stat-item"><div class="stat-value" id="stat-inside">1</div><div class="stat-label">ÏßÄÍµ¨ÎÇ¥</div></div>
            <div class="stat-item"><div class="stat-value" id="stat-nearby">1</div><div class="stat-label">ÏßÄÍµ¨Ïù∏Í∑º</div></div>
            <div class="stat-item"><div class="stat-value" id="stat-project">6</div><div class="stat-label">ÏÇ¨ÏóÖÏßÄÍµ¨</div></div>
        </div>
    </div>
    <div class="maptype-panel glass-panel">
        <button class="maptype-btn active" onclick="setMapType('roadmap', this)">ÏùºÎ∞ò</button>
        <button class="maptype-btn" onclick="setMapType('skyview', this)">Ïä§Ïπ¥Ïù¥Î∑∞</button>
        <button class="maptype-btn" onclick="setMapType('hybrid', this)">ÌïòÏù¥Î∏åÎ¶¨Îìú</button>
    </div>
    <div class="zoom-panel glass-panel">
        <button class="zoom-btn" onclick="zoomIn()">+</button>
        <button class="zoom-btn" onclick="zoomOut()">‚àí</button>
    </div>
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=7e60f6a42602355b925c66ea6db3bd87&libraries=clusterer"></script>
    <script>
        var DATA_rail = [{name: "GTX-A ÏàòÏõêÏó≠", address: "Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÌåîÎã¨Íµ¨ Ïó≠Ï†ÑÎèô", lat: 37.2665, lng: 127.0017, category: "Ï≤†ÎèÑÏòàÏ†ïÏßÄ"},{name: "Ïã†Î∂ÑÎãπÏÑ† Ïó∞Ïû• Í¥ëÍµêÏó≠", address: "Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ Ïù¥ÏùòÎèô", lat: 37.2947, lng: 127.0607, category: "Ï≤†ÎèÑÏòàÏ†ïÏßÄ"}];
        var DATA_highway = [{name: "ÏàòÎèÑÍ∂åÏ†ú2ÏàúÌôò ÏïàÏÑ±IC", address: "Í≤ΩÍ∏∞ ÏïàÏÑ±Ïãú Í≥µÎèÑÏùç", lat: 36.9899, lng: 127.1356, category: "Í≥†ÏÜçÎèÑÎ°úIC"},{name: "ÌèâÌÉùÌååÏ£ºÍ≥†ÏÜç Ïò§ÏÇ∞IC", address: "Í≤ΩÍ∏∞ Ïò§ÏÇ∞Ïãú Î∂ÄÏÇ∞Îèô", lat: 37.1597, lng: 127.0800, category: "Í≥†ÏÜçÎèÑÎ°úIC"}];
        var DATA_dev = [{name: "ÌôîÏÑ±ÎèôÌÉÑ2 ÌÉùÏßÄÍ∞úÎ∞úÏÇ¨ÏóÖ", address: "Í≤ΩÍ∏∞ ÌôîÏÑ±Ïãú Î™©Îèô", lat: 37.1863, lng: 127.1169, category: "Í∞úÎ∞úÏòàÏ†ïÏßÄ"},{name: "Í≥†ÏñëÏ∞ΩÎ¶â Í≥µÍ≥µÏ£ºÌÉùÏßÄÍµ¨", address: "Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÎçïÏñëÍµ¨ ÌôîÏ†ÑÎèô", lat: 37.6167, lng: 126.8778, category: "Í∞úÎ∞úÏòàÏ†ïÏßÄ"}];
        var DATA_inside = [{name: "ÌôîÏÑ±Ïãú Î™©Îèô ÌÜ†ÏßÄ", address: "Í≤ΩÍ∏∞ ÌôîÏÑ±Ïãú Î™©Îèô ÏÇ∞ 89-2", lat: 37.1870, lng: 127.1175, min_price: 150000000, category: "ÏßÄÍµ¨ÎÇ¥Í≤ΩÍ≥µÎß§"}];
        var DATA_nearby = [{name: "Ïò§ÏÇ∞Ïãú Ï≤≠ÌïôÎèô ÌÜ†ÏßÄ", address: "Í≤ΩÍ∏∞ Ïò§ÏÇ∞Ïãú Ï≤≠ÌïôÎèô 361-1", lat: 37.1485, lng: 127.0501, min_price: 85000000, category: "ÏßÄÍµ¨Ïù∏Í∑ºÍ≤ΩÍ≥µÎß§"}];
        var map, markers = {rail:[],highway:[],dev:[],inside:[],nearby:[],polygon:[],auction:[],public:[],boundary:[]}, clusterers = {}, infowindow;
        function init() {
            var container = document.getElementById('map');
            map = new kakao.maps.Map(container, {center: new kakao.maps.LatLng(37.3, 127.0), level: 9});
            infowindow = new kakao.maps.InfoWindow({zIndex: 1});
            var categories = ['rail', 'highway', 'dev', 'inside', 'nearby'];
            categories.forEach(function(cat) {
                clusterers[cat] = new kakao.maps.MarkerClusterer({map: map, averageCenter: true, minLevel: 6, disableClickZoom: false, styles: [{width:'50px',height:'50px',background:'linear-gradient(135deg, #d4a853, #c49b4a)',borderRadius:'50%',color:'#0f1419',textAlign:'center',lineHeight:'50px',fontWeight:'700',fontSize:'14px',border:'3px solid rgba(255,255,255,0.3)'}]});
            });
            createMarkers('rail', DATA_rail, '#ef4444');
            createMarkers('highway', DATA_highway, '#f59e0b');
            createMarkers('dev', DATA_dev, '#8b5cf6');
            createMarkers('inside', DATA_inside, '#22c55e');
            createMarkers('nearby', DATA_nearby, '#3b82f6');
            categories.forEach(function(cat) { if(markers[cat].length > 0) clusterers[cat].addMarkers(markers[cat]); });
        }
        function createMarkers(category, data, color) {
            data.forEach(function(item) {
                var position = new kakao.maps.LatLng(item.lat, item.lng);
                var markerImage = new kakao.maps.MarkerImage(createMarkerSVG(color), new kakao.maps.Size(32, 40), {offset: new kakao.maps.Point(16, 40)});
                var marker = new kakao.maps.Marker({position: position, image: markerImage});
                kakao.maps.event.addListener(marker, 'click', function() {
                    var content = createInfoContent(item);
                    infowindow.setContent(content);
                    infowindow.open(map, marker);
                });
                markers[category].push(marker);
            });
        }
        function createMarkerSVG(color) {
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" width="32" height="40" viewBox="0 0 32 40"><defs><filter id="shadow" x="-50%" y="-50%" width="200%" height="200%"><feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="' + color + '" flood-opacity="0.5"/></filter></defs><path d="M16 0C7.163 0 0 7.163 0 16c0 10 16 24 16 24s16-14 16-24C32 7.163 24.837 0 16 0z" fill="' + color + '" filter="url(#shadow)"/><circle cx="16" cy="14" r="6" fill="white" opacity="0.9"/></svg>';
            return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
        }
        function createInfoContent(item) {
            var priceStr = item.min_price ? '<div style="margin-top:8px;font-size:13px;color:#d4a853;font-weight:600;">' + formatPrice(item.min_price) + '</div>' : '';
            return '<div class="custom-infowindow"><div class="info-title">' + item.name + '</div><div class="info-address">' + item.address + '</div><span class="info-category">' + item.category + '</span>' + priceStr + '</div>';
        }
        function formatPrice(price) {
            if (price >= 100000000) return (price / 100000000).toFixed(1) + 'ÏñµÏõê';
            else if (price >= 10000) return (price / 10000).toFixed(0) + 'ÎßåÏõê';
            return price + 'Ïõê';
        }
        function toggleLayer(category) {
            var checkbox = document.getElementById('layer-' + category);
            var isChecked = checkbox.checked;
            if (clusterers[category]) clusterers[category].setMap(isChecked ? map : null);
            else if (markers[category]) markers[category].forEach(function(m) { m.setMap(isChecked ? map : null); });
        }
        function setMapType(type, btn) {
            var mapTypes = {'roadmap': kakao.maps.MapTypeId.ROADMAP, 'skyview': kakao.maps.MapTypeId.SKYVIEW, 'hybrid': kakao.maps.MapTypeId.HYBRID};
            map.setMapTypeId(mapTypes[type]);
            document.querySelectorAll('.maptype-btn').forEach(function(b) { b.classList.remove('active'); });
            btn.classList.add('active');
        }
        function zoomIn() { map.setLevel(map.getLevel() - 1); }
        function zoomOut() { map.setLevel(map.getLevel() + 1); }
        kakao.maps.load(init);
    </script>
</body>
</html>